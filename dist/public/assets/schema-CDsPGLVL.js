var fa=Object.defineProperty;var ga=(t,e,n)=>e in t?fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var i=(t,e,n)=>ga(t,typeof e!="symbol"?e+"":e,n);import{c as _a,ax as ya,ay as ha,az as Na,aA as ba,aB as wa,aC as Sa,aD as Ta,aE as ie,aF as Pa,aG as Ia,aH as Aa,aI as xa,aJ as Da,aK as Ca,aL as va,aM as ka,aN as qa,aO as be,aP as Va,aQ as Ba,aR as Ma,aS as La,aT as Fa,aU as $a,aV as Ua,aW as za,aX as Ea,aY as ja,aZ as Oa,a_ as Qa,a$ as Ka,b0 as Ra,b1 as Za,b2 as Xa,b3 as Ga,b4 as Ja,b5 as Ha,b6 as Wa,b7 as Ya,b8 as eo,b9 as to,ba as no,bb as ro,bc as io,bd as so,be as ao,bf as oo,bg as uo,bh as lo,bi as G,bj as j,bk as co,bl as Y,aj as po,bm as _i,bn as mo,bo as fo,bp as go,bq as _o,br as we,ak as U,bs as yo,bt as ho,bu as No,bv as bo,bw as wo,bx as So,by as To,bz as Po,bA as Io,bB as Ao,bC as xo,bD as Do,bE as Co,bF as vo,bG as ko,bH as qo,bI as Vo,bJ as yi,bK as Bo,bL as F,bM as E,bN as Mo,bO as Lo,bP as Fo,bQ as $o,bR as Uo,bS as zo,bT as Eo,bU as jo,bV as Oo,bW as ce,bX as Qo,bY as Ko,bZ as Ro,b_ as $,b$ as Zo,c0 as Xo,c1 as Go,c2 as de,c3 as Jo,c4 as Ho,c5 as Wo}from"./index-DI4YInPS.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=_a("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),hi=Object.freeze(Object.defineProperty({__proto__:null,BRAND:ya,DIRTY:ha,EMPTY_PATH:Na,INVALID:ba,NEVER:wa,OK:Sa,ParseStatus:Ta,Schema:ie,ZodAny:Pa,ZodArray:Ia,ZodBigInt:Aa,ZodBoolean:xa,ZodBranded:Da,ZodCatch:Ca,ZodDate:va,ZodDefault:ka,ZodDiscriminatedUnion:qa,ZodEffects:be,ZodEnum:Va,ZodError:Ba,get ZodFirstPartyTypeKind(){return Ma},ZodFunction:La,ZodIntersection:Fa,ZodIssueCode:$a,ZodLazy:Ua,ZodLiteral:za,ZodMap:Ea,ZodNaN:ja,ZodNativeEnum:Oa,ZodNever:Qa,ZodNull:Ka,ZodNullable:Ra,ZodNumber:Za,ZodObject:Xa,ZodOptional:Ga,ZodParsedType:Ja,ZodPipeline:Ha,ZodPromise:Wa,ZodReadonly:Ya,ZodRecord:eo,ZodSchema:ie,ZodSet:to,ZodString:no,ZodSymbol:ro,ZodTransformer:be,ZodTuple:io,ZodType:ie,ZodUndefined:so,ZodUnion:ao,ZodUnknown:oo,ZodVoid:uo,addIssueToContext:lo,any:G,array:j,bigint:co,boolean:Y,coerce:po,custom:_i,date:mo,datetimeRegex:fo,defaultErrorMap:go,discriminatedUnion:_o,effect:we,enum:U,function:yo,getErrorMap:ho,getParsedType:No,instanceof:bo,intersection:wo,isAborted:So,isAsync:To,isDirty:Po,isValid:Io,late:Ao,lazy:xo,literal:Do,makeIssue:Co,map:vo,nan:ko,nativeEnum:qo,never:Vo,null:yi,nullable:Bo,number:F,object:E,get objectUtil(){return Mo},oboolean:Lo,onumber:Fo,optional:$o,ostring:Uo,pipeline:zo,preprocess:Eo,promise:jo,quotelessJson:Oo,record:ce,set:Qo,setErrorMap:Ko,strictObject:Ro,string:$,symbol:Zo,transformer:we,tuple:Xo,undefined:Go,union:de,unknown:Jo,get util(){return Ho},void:Wo},Symbol.toStringTag,{value:"Module"})),a=Symbol.for("drizzle:entityKind");function v(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,a))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(a in n&&n[a]===e[a])return!0;n=Object.getPrototypeOf(n)}return!1}var Ce;Ce=a;class K{constructor(e,n){i(this,"name");i(this,"keyAsName");i(this,"primary");i(this,"notNull");i(this,"default");i(this,"defaultFn");i(this,"onUpdateFn");i(this,"hasDefault");i(this,"isUnique");i(this,"uniqueName");i(this,"uniqueType");i(this,"dataType");i(this,"columnType");i(this,"enumValues");i(this,"generated");i(this,"generatedIdentity");i(this,"config");this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}i(K,Ce,"Column");var ve;ve=a;class Ni{constructor(e,n,r){i(this,"config");i(this,"$default",this.$defaultFn);i(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}i(Ni,ve,"ColumnBuilder");const O=Symbol.for("drizzle:Name");var ke;ke=a;class bi{constructor(e,n){i(this,"reference");i(this,"_onUpdate","no action");i(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:o,foreignColumns:l}=e();return{name:r,columns:o,foreignTable:l[0].table,foreignColumns:l}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new wi(e,this)}}i(bi,ke,"PgForeignKeyBuilder");var qe;qe=a;class wi{constructor(e,n){i(this,"reference");i(this,"onUpdate");i(this,"onDelete");this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),o=n.map(S=>S.name),l=r.map(S=>S.name),f=[this.table[O],...o,r[0].table[O],...l];return e??`${f.join("_")}_fk`}}i(wi,qe,"PgForeignKey");function Yo(t,...e){return t(...e)}function eu(t,e){return`${t[O]}_${e.join("_")}_unique`}function Se(t,e,n){for(let r=e;r<t.length;r++){const o=t[r];if(o==="\\"){r++;continue}if(o==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(o===","||o==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function Si(t,e=0){const n=[];let r=e,o=!1;for(;r<t.length;){const l=t[r];if(l===","){(o||r===e)&&n.push(""),o=!0,r++;continue}if(o=!1,l==="\\"){r+=2;continue}if(l==='"'){const[w,I]=Se(t,r+1,!0);n.push(w),r=I;continue}if(l==="}")return[n,r+1];if(l==="{"){const[w,I]=Si(t,r+1);n.push(w),r=I;continue}const[f,S]=Se(t,r,!1);n.push(f),r=S}return[n,r]}function tu(t){const[e]=Si(t,1);return e}function Ti(t){return`{${t.map(e=>Array.isArray(e)?Ti(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var Ve,Be;class b extends(Be=Ni,Ve=a,Be){constructor(){super(...arguments);i(this,"foreignKeyConfigs",[])}array(n){return new Ii(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:o,actions:l})=>Yo((f,S)=>{const w=new bi(()=>{const I=f();return{columns:[n],foreignColumns:[I]}});return S.onUpdate&&w.onUpdate(S.onUpdate),S.onDelete&&w.onDelete(S.onDelete),w.build(r)},o,l))}buildExtraConfigColumn(n){return new Pi(n,this.config)}}i(b,Ve,"PgColumnBuilder");var Me,Le;class _ extends(Le=K,Me=a,Le){constructor(e,n){n.uniqueName||(n.uniqueName=eu(e,[n.name])),super(e,n),this.table=e}}i(_,Me,"PgColumn");var Fe,$e;class Pi extends($e=_,Fe=a,$e){constructor(){super(...arguments);i(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});i(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}i(Pi,Fe,"ExtraConfigColumn");var Ue;Ue=a;class H{constructor(e,n,r,o){i(this,"name");i(this,"keyAsName");i(this,"type");i(this,"indexConfig");this.name=e,this.keyAsName=n,this.type=r,this.indexConfig=o}}i(H,Ue,"IndexedColumn");var ze,Ee;class Ii extends(Ee=b,ze=a,Ee){constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new ue(e,this.config,n)}}i(Ii,ze,"PgArrayBuilder");var je,Oe;const re=class re extends(Oe=_,je=a,Oe){constructor(n,r,o,l){super(n,r);i(this,"size");this.baseColumn=o,this.range=l,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=tu(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const o=n.map(l=>l===null?null:v(this.baseColumn,re)?this.baseColumn.mapToDriverValue(l,!0):this.baseColumn.mapToDriverValue(l));return r?o:Ti(o)}};i(re,je,"PgArray");let ue=re;const Te=Symbol.for("drizzle:isPgEnum");function nu(t){return!!t&&typeof t=="function"&&Te in t&&t[Te]===!0}var Qe;Qe=a;class pe{constructor(e,n,r,o=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:o}}}i(pe,Qe,"Subquery");const ru={startActiveSpan(t,e){return e()}},Q=Symbol.for("drizzle:ViewBaseConfig"),se=Symbol.for("drizzle:Schema"),Pe=Symbol.for("drizzle:Columns"),Ie=Symbol.for("drizzle:ExtraConfigColumns"),ae=Symbol.for("drizzle:OriginalName"),oe=Symbol.for("drizzle:BaseName"),ee=Symbol.for("drizzle:IsAlias"),Ae=Symbol.for("drizzle:ExtraConfigBuilder"),Ai=Symbol.for("drizzle:IsDrizzleTable");var Ke,Re,Ze,Xe,Ge,Je,He,We,Ye,et;et=a,Ye=O,We=ae,He=se,Je=Pe,Ge=Ie,Xe=oe,Ze=ee,Re=Ai,Ke=Ae;class V{constructor(e,n,r){i(this,Ye);i(this,We);i(this,He);i(this,Je);i(this,Ge);i(this,Xe);i(this,Ze,!1);i(this,Re,!0);i(this,Ke);this[O]=this[ae]=e,this[se]=n,this[oe]=r}}i(V,et,"Table"),i(V,"Symbol",{Name:O,Schema:se,OriginalName:ae,Columns:Pe,ExtraConfigColumns:Ie,BaseName:oe,IsAlias:ee,ExtraConfigBuilder:Ae});function xi(t){return typeof t=="object"&&t!==null&&Ai in t}function iu(t){return t!=null&&typeof t.getSQL=="function"}function su(t){var n;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(n=r.typings)!=null&&n.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var tt;tt=a;class B{constructor(e){i(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new x([this])}}i(B,tt,"StringChunk");var nt;nt=a;const z=class z{constructor(e){i(this,"decoder",Di);i(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ru.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:o,escapeName:l,escapeParam:f,prepareTyping:S,inlineParams:w,paramStartIndex:I}=r;return su(e.map(d=>{var L;if(v(d,B))return{sql:d.value.join(""),params:[]};if(v(d,te))return{sql:l(d.value),params:[]};if(d===void 0)return{sql:"",params:[]};if(Array.isArray(d)){const P=[new B("(")];for(const[k,ma]of d.entries())P.push(ma),k<d.length-1&&P.push(new B(", "));return P.push(new B(")")),this.buildQueryFromSourceParams(P,r)}if(v(d,z))return this.buildQueryFromSourceParams(d.queryChunks,{...r,inlineParams:w||d.shouldInlineParams});if(v(d,V)){const P=d[V.Symbol.Schema],k=d[V.Symbol.Name];return{sql:P===void 0||d[ee]?l(k):l(P)+"."+l(k),params:[]}}if(v(d,K)){const P=o.getColumnCasing(d);if(n.invokeSource==="indexes")return{sql:l(P),params:[]};const k=d.table[V.Symbol.Schema];return{sql:d.table[ee]||k===void 0?l(d.table[V.Symbol.Name])+"."+l(P):l(k)+"."+l(d.table[V.Symbol.Name])+"."+l(P),params:[]}}if(v(d,ki)){const P=d[Q].schema,k=d[Q].name;return{sql:P===void 0||d[Q].isAlias?l(k):l(P)+"."+l(k),params:[]}}if(v(d,me)){if(v(d.value,ne))return{sql:f(I.value++,d),params:[d],typings:["none"]};const P=d.value===null?null:d.encoder.mapToDriverValue(d.value);if(v(P,z))return this.buildQueryFromSourceParams([P],r);if(w)return{sql:this.mapInlineParam(P,r),params:[]};let k=["none"];return S&&(k=[S(d.encoder)]),{sql:f(I.value++,P),params:[P],typings:k}}return v(d,ne)?{sql:f(I.value++,d),params:[d],typings:["none"]}:v(d,z.Aliased)&&d.fieldAlias!==void 0?{sql:l(d.fieldAlias),params:[]}:v(d,pe)?d._.isWith?{sql:l(d._.alias),params:[]}:this.buildQueryFromSourceParams([new B("("),d._.sql,new B(") "),new te(d._.alias)],r):nu(d)?d.schema?{sql:l(d.schema)+"."+l(d.enumName),params:[]}:{sql:l(d.enumName),params:[]}:iu(d)?(L=d.shouldOmitSQLParens)!=null&&L.call(d)?this.buildQueryFromSourceParams([d.getSQL()],r):this.buildQueryFromSourceParams([new B("("),d.getSQL(),new B(")")],r):w?{sql:this.mapInlineParam(d,r),params:[]}:{sql:f(I.value++,d),params:[d],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new z.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};i(z,nt,"SQL");let x=z;var rt;rt=a;class te{constructor(e){i(this,"brand");this.value=e}getSQL(){return new x([this])}}i(te,rt,"Name");const Di={mapFromDriverValue:t=>t},Ci={mapToDriverValue:t=>t};({...Di,...Ci});var it;it=a;class me{constructor(e,n=Ci){i(this,"brand");this.value=e,this.encoder=n}getSQL(){return new x([this])}}i(me,it,"Param");function g(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new B(t[0]));for(const[r,o]of e.entries())n.push(o,new B(t[r+1]));return new x(n)}(t=>{function e(){return new x([])}t.empty=e;function n(w){return new x(w)}t.fromList=n;function r(w){return new x([new B(w)])}t.raw=r;function o(w,I){const d=[];for(const[L,P]of w.entries())L>0&&I!==void 0&&d.push(I),d.push(P);return new x(d)}t.join=o;function l(w){return new te(w)}t.identifier=l;function f(w){return new ne(w)}t.placeholder=f;function S(w,I){return new me(w,I)}t.param=S})(g||(g={}));(t=>{var n;n=a;const r=class r{constructor(l,f){i(this,"isSelectionField",!1);this.sql=l,this.fieldAlias=f}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};i(r,n,"SQL.Aliased");let e=r;t.Aliased=e})(x||(x={}));var st;st=a;class ne{constructor(e){this.name=e}getSQL(){return new x([this])}}i(ne,st,"Placeholder");const vi=Symbol.for("drizzle:IsDrizzleView");var at,ot,ut;ut=a,ot=Q,at=vi;class ki{constructor({name:e,schema:n,selectedFields:r,query:o}){i(this,ot);i(this,at,!0);this[Q]={name:e,originalName:e,schema:n,selectedFields:r,query:o,isExisting:!o,isAlias:!1}}getSQL(){return new x([this])}}i(ki,ut,"View");function au(t){return typeof t=="object"&&t!==null&&vi in t}K.prototype.getSQL=function(){return new x([this])};V.prototype.getSQL=function(){return new x([this])};pe.prototype.getSQL=function(){return new x([this])};function ou(t){return t[V.Symbol.Columns]}function uu(t){return t[Q].selectedFields}function q(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var lt,ct;class J extends(ct=b,lt=a,ct){generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}i(J,lt,"PgIntColumnBaseBuilder");var dt,pt;class qi extends(pt=J,dt=a,pt){constructor(e){super(e,"number","PgBigInt53")}build(e){return new Vi(e,this.config)}}i(qi,dt,"PgBigInt53Builder");var mt,ft;class Vi extends(ft=_,mt=a,ft){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(Vi,mt,"PgBigInt53");var gt,_t;class Bi extends(_t=J,gt=a,_t){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new Mi(e,this.config)}}i(Bi,gt,"PgBigInt64Builder");var yt,ht;class Mi extends(ht=_,yt=a,ht){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}i(Mi,yt,"PgBigInt64");function lu(t,e){const{name:n,config:r}=q(t,e);return r.mode==="number"?new qi(n):new Bi(n)}var Nt,bt;class Li extends(bt=b,Nt=a,bt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Fi(e,this.config)}}i(Li,Nt,"PgBigSerial53Builder");var wt,St;class Fi extends(St=_,wt=a,St){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(Fi,wt,"PgBigSerial53");var Tt,Pt;class $i extends(Pt=b,Tt=a,Pt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Ui(e,this.config)}}i($i,Tt,"PgBigSerial64Builder");var It,At;class Ui extends(At=_,It=a,At){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}i(Ui,It,"PgBigSerial64");function cu(t,e){const{name:n,config:r}=q(t,e);return r.mode==="number"?new Li(n):new $i(n)}var xt,Dt;class zi extends(Dt=b,xt=a,Dt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Ei(e,this.config)}}i(zi,xt,"PgBooleanBuilder");var Ct,vt;class Ei extends(vt=_,Ct=a,vt){getSQLType(){return"boolean"}}i(Ei,Ct,"PgBoolean");function T(t){return new zi(t??"")}var kt,qt;class ji extends(qt=b,kt=a,qt){constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Oi(e,this.config)}}i(ji,kt,"PgCharBuilder");var Vt,Bt;class Oi extends(Bt=_,Vt=a,Bt){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}i(Oi,Vt,"PgChar");function du(t,e={}){const{name:n,config:r}=q(t,e);return new ji(n,r)}var Mt,Lt;class Qi extends(Lt=b,Mt=a,Lt){constructor(e){super(e,"string","PgCidr")}build(e){return new Ki(e,this.config)}}i(Qi,Mt,"PgCidrBuilder");var Ft,$t;class Ki extends($t=_,Ft=a,$t){getSQLType(){return"cidr"}}i(Ki,Ft,"PgCidr");function pu(t){return new Qi(t??"")}var Ut,zt;class Ri extends(zt=b,Ut=a,zt){constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new Zi(e,this.config)}}i(Ri,Ut,"PgCustomColumnBuilder");var Et,jt;class Zi extends(jt=_,Et=a,jt){constructor(n,r){super(n,r);i(this,"sqlName");i(this,"mapTo");i(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}i(Zi,Et,"PgCustomColumn");function mu(t){return(e,n)=>{const{name:r,config:o}=q(e,n);return new Ri(r,o,t)}}var Ot,Qt;class Z extends(Qt=b,Ot=a,Qt){defaultNow(){return this.default(g`now()`)}}i(Z,Ot,"PgDateColumnBaseBuilder");var Kt,Rt;class Xi extends(Rt=Z,Kt=a,Rt){constructor(e){super(e,"date","PgDate")}build(e){return new Gi(e,this.config)}}i(Xi,Kt,"PgDateBuilder");var Zt,Xt;class Gi extends(Xt=_,Zt=a,Xt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}i(Gi,Zt,"PgDate");var Gt,Jt;class Ji extends(Jt=Z,Gt=a,Jt){constructor(e){super(e,"string","PgDateString")}build(e){return new Hi(e,this.config)}}i(Ji,Gt,"PgDateStringBuilder");var Ht,Wt;class Hi extends(Wt=_,Ht=a,Wt){getSQLType(){return"date"}}i(Hi,Ht,"PgDateString");function fu(t,e){const{name:n,config:r}=q(t,e);return(r==null?void 0:r.mode)==="date"?new Xi(n):new Ji(n)}var Yt,en;class Wi extends(en=b,Yt=a,en){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Yi(e,this.config)}}i(Wi,Yt,"PgDoublePrecisionBuilder");var tn,nn;class Yi extends(nn=_,tn=a,nn){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}i(Yi,tn,"PgDoublePrecision");function gu(t){return new Wi(t??"")}var rn,sn;class es extends(sn=b,rn=a,sn){constructor(e){super(e,"string","PgInet")}build(e){return new ts(e,this.config)}}i(es,rn,"PgInetBuilder");var an,on;class ts extends(on=_,an=a,on){getSQLType(){return"inet"}}i(ts,an,"PgInet");function _u(t){return new es(t??"")}var un,ln;class ns extends(ln=J,un=a,ln){constructor(e){super(e,"number","PgInteger")}build(e){return new rs(e,this.config)}}i(ns,un,"PgIntegerBuilder");var cn,dn;class rs extends(dn=_,cn=a,dn){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}i(rs,cn,"PgInteger");function m(t){return new ns(t??"")}var pn,mn;class is extends(mn=b,pn=a,mn){constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new ss(e,this.config)}}i(is,pn,"PgIntervalBuilder");var fn,gn;class ss extends(gn=_,fn=a,gn){constructor(){super(...arguments);i(this,"fields",this.config.intervalConfig.fields);i(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}i(ss,fn,"PgInterval");function yu(t,e={}){const{name:n,config:r}=q(t,e);return new is(n,r)}var _n,yn;class as extends(yn=b,_n=a,yn){constructor(e){super(e,"json","PgJson")}build(e){return new os(e,this.config)}}i(as,_n,"PgJsonBuilder");var hn,Nn;class os extends(Nn=_,hn=a,Nn){constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(os,hn,"PgJson");function hu(t){return new as(t??"")}var bn,wn;class us extends(wn=b,bn=a,wn){constructor(e){super(e,"json","PgJsonb")}build(e){return new ls(e,this.config)}}i(us,bn,"PgJsonbBuilder");var Sn,Tn;class ls extends(Tn=_,Sn=a,Tn){constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(ls,Sn,"PgJsonb");function N(t){return new us(t??"")}var Pn,In;class cs extends(In=b,Pn=a,In){constructor(e){super(e,"array","PgLine")}build(e){return new ds(e,this.config)}}i(cs,Pn,"PgLineBuilder");var An,xn;class ds extends(xn=_,An=a,xn){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,o]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(o)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}i(ds,An,"PgLine");var Dn,Cn;class ps extends(Cn=b,Dn=a,Cn){constructor(e){super(e,"json","PgLineABC")}build(e){return new ms(e,this.config)}}i(ps,Dn,"PgLineABCBuilder");var vn,kn;class ms extends(kn=_,vn=a,kn){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,o]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(o)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}i(ms,vn,"PgLineABC");function Nu(t,e){const{name:n,config:r}=q(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new cs(n):new ps(n)}var qn,Vn;class fs extends(Vn=b,qn=a,Vn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new gs(e,this.config)}}i(fs,qn,"PgMacaddrBuilder");var Bn,Mn;class gs extends(Mn=_,Bn=a,Mn){getSQLType(){return"macaddr"}}i(gs,Bn,"PgMacaddr");function bu(t){return new fs(t??"")}var Ln,Fn;class _s extends(Fn=b,Ln=a,Fn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new ys(e,this.config)}}i(_s,Ln,"PgMacaddr8Builder");var $n,Un;class ys extends(Un=_,$n=a,Un){getSQLType(){return"macaddr8"}}i(ys,$n,"PgMacaddr8");function wu(t){return new _s(t??"")}var zn,En;class hs extends(En=b,zn=a,En){constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new Ns(e,this.config)}}i(hs,zn,"PgNumericBuilder");var jn,On;class Ns extends(On=_,jn=a,On){constructor(n,r){super(n,r);i(this,"precision");i(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(Ns,jn,"PgNumeric");function bs(t,e){const{name:n,config:r}=q(t,e);return new hs(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}const p=bs;var Qn,Kn;class ws extends(Kn=b,Qn=a,Kn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ss(e,this.config)}}i(ws,Qn,"PgPointTupleBuilder");var Rn,Zn;class Ss extends(Zn=_,Rn=a,Zn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}i(Ss,Rn,"PgPointTuple");var Xn,Gn;class Ts extends(Gn=b,Xn=a,Gn){constructor(e){super(e,"json","PgPointObject")}build(e){return new Ps(e,this.config)}}i(Ts,Xn,"PgPointObjectBuilder");var Jn,Hn;class Ps extends(Hn=_,Jn=a,Hn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}i(Ps,Jn,"PgPointObject");function Su(t,e){const{name:n,config:r}=q(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new ws(n):new Ts(n)}function Tu(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function xe(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let o=0;o<8;o++)r.setUint8(o,t[e+o]);return r.getFloat64(0,!0)}function Is(t){const e=Tu(t);let n=0;const r=e[n];n+=1;const o=new DataView(e.buffer),l=o.getUint32(n,r===1);if(n+=4,l&536870912&&(o.getUint32(n,r===1),n+=4),(l&65535)===1){const f=xe(e,n);n+=8;const S=xe(e,n);return n+=8,[f,S]}throw new Error("Unsupported geometry type")}var Wn,Yn;class As extends(Yn=b,Wn=a,Yn){constructor(e){super(e,"array","PgGeometry")}build(e){return new xs(e,this.config)}}i(As,Wn,"PgGeometryBuilder");var er,tr;class xs extends(tr=_,er=a,tr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return Is(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}i(xs,er,"PgGeometry");var nr,rr;class Ds extends(rr=b,nr=a,rr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Cs(e,this.config)}}i(Ds,nr,"PgGeometryObjectBuilder");var ir,sr;class Cs extends(sr=_,ir=a,sr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=Is(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}i(Cs,ir,"PgGeometryObject");function Pu(t,e){const{name:n,config:r}=q(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new As(n):new Ds(n)}var ar,or;class vs extends(or=b,ar=a,or){constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new ks(e,this.config)}}i(vs,ar,"PgRealBuilder");var ur,lr;class ks extends(lr=_,ur=a,lr){constructor(n,r){super(n,r);i(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}i(ks,ur,"PgReal");function Iu(t){return new vs(t??"")}var cr,dr;class qs extends(dr=b,cr=a,dr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Vs(e,this.config)}}i(qs,cr,"PgSerialBuilder");var pr,mr;class Vs extends(mr=_,pr=a,mr){getSQLType(){return"serial"}}i(Vs,pr,"PgSerial");function Au(t){return new qs(t??"")}var fr,gr;class Bs extends(gr=J,fr=a,gr){constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ms(e,this.config)}}i(Bs,fr,"PgSmallIntBuilder");var _r,yr;class Ms extends(yr=_,_r=a,yr){constructor(){super(...arguments);i(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}i(Ms,_r,"PgSmallInt");function xu(t){return new Bs(t??"")}var hr,Nr;class Ls extends(Nr=b,hr=a,Nr){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Fs(e,this.config)}}i(Ls,hr,"PgSmallSerialBuilder");var br,wr;class Fs extends(wr=_,br=a,wr){getSQLType(){return"smallserial"}}i(Fs,br,"PgSmallSerial");function Du(t){return new Ls(t??"")}var Sr,Tr;class $s extends(Tr=b,Sr=a,Tr){constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new Us(e,this.config)}}i($s,Sr,"PgTextBuilder");var Pr,Ir;class Us extends(Ir=_,Pr=a,Ir){constructor(){super(...arguments);i(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}i(Us,Pr,"PgText");function s(t,e={}){const{name:n,config:r}=q(t,e);return new $s(n,r)}var Ar,xr;class zs extends(xr=Z,Ar=a,xr){constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(e){return new Es(e,this.config)}}i(zs,Ar,"PgTimeBuilder");var Dr,Cr;class Es extends(Cr=_,Dr=a,Cr){constructor(n,r){super(n,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Es,Dr,"PgTime");function Cu(t,e={}){const{name:n,config:r}=q(t,e);return new zs(n,r.withTimezone??!1,r.precision)}var vr,kr;class js extends(kr=Z,vr=a,kr){constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new Os(e,this.config)}}i(js,vr,"PgTimestampBuilder");var qr,Vr;class Os extends(Vr=_,qr=a,Vr){constructor(n,r){super(n,r);i(this,"withTimezone");i(this,"precision");i(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));i(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Os,qr,"PgTimestamp");var Br,Mr;class Qs extends(Mr=Z,Br=a,Mr){constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new Ks(e,this.config)}}i(Qs,Br,"PgTimestampStringBuilder");var Lr,Fr;class Ks extends(Fr=_,Lr=a,Fr){constructor(n,r){super(n,r);i(this,"withTimezone");i(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ks,Lr,"PgTimestampString");function c(t,e={}){const{name:n,config:r}=q(t,e);return(r==null?void 0:r.mode)==="string"?new Qs(n,r.withTimezone??!1,r.precision):new js(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var $r,Ur;class Rs extends(Ur=b,$r=a,Ur){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(g`gen_random_uuid()`)}build(e){return new Zs(e,this.config)}}i(Rs,$r,"PgUUIDBuilder");var zr,Er;class Zs extends(Er=_,zr=a,Er){getSQLType(){return"uuid"}}i(Zs,zr,"PgUUID");function vu(t){return new Rs(t??"")}var jr,Or;class Xs extends(Or=b,jr=a,Or){constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Gs(e,this.config)}}i(Xs,jr,"PgVarcharBuilder");var Qr,Kr;class Gs extends(Kr=_,Qr=a,Kr){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}i(Gs,Qr,"PgVarchar");function u(t,e={}){const{name:n,config:r}=q(t,e);return new Xs(n,r)}var Rr,Zr;class Js extends(Zr=b,Rr=a,Zr){constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Hs(e,this.config)}}i(Js,Rr,"PgBinaryVectorBuilder");var Xr,Gr;class Hs extends(Gr=_,Xr=a,Gr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}i(Hs,Xr,"PgBinaryVector");function ku(t,e){const{name:n,config:r}=q(t,e);return new Js(n,r)}var Jr,Hr;class Ws extends(Hr=b,Jr=a,Hr){constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Ys(e,this.config)}}i(Ws,Jr,"PgHalfVectorBuilder");var Wr,Yr;class Ys extends(Yr=_,Wr=a,Yr){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(Ys,Wr,"PgHalfVector");function qu(t,e){const{name:n,config:r}=q(t,e);return new Ws(n,r)}var ei,ti;class ea extends(ti=b,ei=a,ti){constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new ta(e,this.config)}}i(ea,ei,"PgSparseVectorBuilder");var ni,ri;class ta extends(ri=_,ni=a,ri){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}i(ta,ni,"PgSparseVector");function Vu(t,e){const{name:n,config:r}=q(t,e);return new ea(n,r)}var ii,si;class na extends(si=b,ii=a,si){constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new ra(e,this.config)}}i(na,ii,"PgVectorBuilder");var ai,oi;class ra extends(oi=_,ai=a,oi){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}i(ra,ai,"PgVector");function Bu(t,e){const{name:n,config:r}=q(t,e);return new na(n,r)}function Mu(){return{bigint:lu,bigserial:cu,boolean:T,char:du,cidr:pu,customType:mu,date:fu,doublePrecision:gu,inet:_u,integer:m,interval:yu,json:hu,jsonb:N,line:Nu,macaddr:bu,macaddr8:wu,numeric:bs,point:Su,geometry:Pu,real:Iu,serial:Au,smallint:xu,smallserial:Du,text:s,time:Cu,timestamp:c,uuid:vu,varchar:u,bit:ku,halfvec:qu,sparsevec:Vu,vector:Bu}}const le=Symbol.for("drizzle:PgInlineForeignKeys"),De=Symbol.for("drizzle:EnableRLS");var ui,li,ci,di,pi;class X extends(pi=V,di=a,ci=le,li=De,ui=V.Symbol.ExtraConfigBuilder,pi){constructor(){super(...arguments);i(this,ci,[]);i(this,li,!1);i(this,ui)}}i(X,di,"PgTable"),i(X,"Symbol",Object.assign({},V.Symbol,{InlineForeignKeys:le,EnableRLS:De}));function Lu(t,e,n,r,o=t){const l=new X(t,r,o),f=typeof e=="function"?e(Mu()):e,S=Object.fromEntries(Object.entries(f).map(([d,L])=>{const P=L;P.setName(d);const k=P.build(l);return l[le].push(...P.buildForeignKeys(k,l)),[d,k]})),w=Object.fromEntries(Object.entries(f).map(([d,L])=>{const P=L;P.setName(d);const k=P.buildExtraConfigColumn(l);return[d,k]})),I=Object.assign(l,S);return I[V.Symbol.Columns]=S,I[V.Symbol.ExtraConfigColumns]=w,n&&(I[X.Symbol.ExtraConfigBuilder]=n),Object.assign(I,{enableRLS:()=>(I[X.Symbol.EnableRLS]=!0,I)})}const y=(t,e,n)=>Lu(t,e,n,void 0);var mi;mi=a;class fe{constructor(e,n){this.unique=e,this.name=n}on(...e){return new W(e.map(n=>{if(v(n,x))return n;n=n;const r=new H(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...e){return new W(e.map(n=>{if(v(n,x))return n;n=n;const r=new H(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,r}),this.unique,!0,this.name)}using(e,...n){return new W(n.map(r=>{if(v(r,x))return r;r=r;const o=new H(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),o}),this.unique,!0,this.name,e)}}i(fe,mi,"PgIndexBuilderOn");var fi;fi=a;class W{constructor(e,n,r,o,l="btree"){i(this,"config");this.config={name:o,columns:e,unique:n,only:r,method:l}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new ia(this.config,e)}}i(W,fi,"PgIndexBuilder");var gi;gi=a;class ia{constructor(e,n){i(this,"config");this.config={...e,table:n}}}i(ia,gi,"PgIndex");function R(t){return new fe(!1,t)}function M(t){return new fe(!0,t)}const A={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function C(t,e){return e.includes(t.columnType)}function sa(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Fu=sa,$u=de([$(),F(),Y(),yi()]),Uu=de([$u,ce(G()),j(G())]),zu=_i(t=>t instanceof Buffer);function aa(t,e){const n=(e==null?void 0:e.zodInstance)??hi,r=(e==null?void 0:e.coerce)??{};let o;return sa(t)&&(o=t.enumValues.length?n.enum(t.enumValues):n.string()),o||(C(t,["PgGeometry","PgPointTuple"])?o=n.tuple([n.number(),n.number()]):C(t,["PgGeometryObject","PgPointObject"])?o=n.object({x:n.number(),y:n.number()}):C(t,["PgHalfVector","PgVector"])?(o=n.array(n.number()),o=t.dimensions?o.length(t.dimensions):o):C(t,["PgLine"])?o=n.tuple([n.number(),n.number(),n.number()]):C(t,["PgLineABC"])?o=n.object({a:n.number(),b:n.number(),c:n.number()}):C(t,["PgArray"])?(o=n.array(aa(t.baseColumn,n)),o=t.size?o.length(t.size):o):t.dataType==="array"?o=n.array(n.any()):t.dataType==="number"?o=Eu(t,n,r):t.dataType==="bigint"?o=ju(t,n,r):t.dataType==="boolean"?o=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?o=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?o=Ou(t,n,r):t.dataType==="json"?o=Uu:t.dataType==="custom"?o=n.any():t.dataType==="buffer"&&(o=zu)),o||(o=n.any()),o}function Eu(t,e,n){let r=t.getSQLType().includes("unsigned"),o,l,f=!1;C(t,["MySqlTinyInt","SingleStoreTinyInt"])?(o=r?0:A.INT8_MIN,l=r?A.INT8_UNSIGNED_MAX:A.INT8_MAX,f=!0):C(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(o=r?0:A.INT16_MIN,l=r?A.INT16_UNSIGNED_MAX:A.INT16_MAX,f=!0):C(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(o=r?0:A.INT24_MIN,l=r?A.INT24_UNSIGNED_MAX:A.INT24_MAX,f=C(t,["MySqlMediumInt","SingleStoreMediumInt"])):C(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(o=r?0:A.INT32_MIN,l=r?A.INT32_UNSIGNED_MAX:A.INT32_MAX,f=!0):C(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(o=r?0:A.INT48_MIN,l=r?A.INT48_UNSIGNED_MAX:A.INT48_MAX):C(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||C(t,["MySqlSerial","SingleStoreSerial"]),o=r?0:Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,f=!0):C(t,["MySqlYear","SingleStoreYear"])?(o=1901,l=2155,f=!0):(o=Number.MIN_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER);let S=n===!0||n!=null&&n.number?e.coerce.number():e.number();return S=S.min(o).max(l),f?S.int():S}function ju(t,e,n){const r=t.getSQLType().includes("unsigned"),o=r?0n:A.INT64_MIN,l=r?A.INT64_UNSIGNED_MAX:A.INT64_MAX;return(n===!0||n!=null&&n.bigint?e.coerce.bigint():e.bigint()).min(o).max(l)}function Ou(t,e,n){if(C(t,["PgUUID"]))return e.string().uuid();let r,o,l=!1;C(t,["PgVarchar","SQLiteText"])?r=t.length:C(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??A.INT16_UNSIGNED_MAX:C(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=A.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=A.INT24_UNSIGNED_MAX:t.textType==="text"?r=A.INT16_UNSIGNED_MAX:r=A.INT8_UNSIGNED_MAX),C(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,l=!0),C(t,["PgBinaryVector"])&&(o=/^[01]+$/,r=t.dimensions);let f=n===!0||n!=null&&n.string?e.coerce.string():e.string();return f=o?f.regex(o):f,r&&l?f.length(r):r?f.max(r):f}function ge(t){return xi(t)?ou(t):uu(t)}function _e(t,e,n,r){const o={};for(const[l,f]of Object.entries(t)){if(!v(f,K)&&!v(f,x)&&!v(f,x.Aliased)&&typeof f=="object"){const L=xi(f)||au(f)?ge(f):f;o[l]=_e(L,e[l]??{},n,r);continue}const S=e[l];if(S!==void 0&&typeof S!="function"){o[l]=S;continue}const w=v(f,K)?f:void 0,I=w?aa(w,r):G(),d=typeof S=="function"?S(I):I;n.never(w)||(o[l]=d,w&&(n.nullable(w)&&(o[l]=o[l].nullable()),n.optional(w)&&(o[l]=o[l].optional())))}return E(o)}function Qu(t,e){return((e==null?void 0:e.zodInstance)??hi).enum(t.enumValues)}const Ku={never:()=>!1,optional:()=>!1,nullable:t=>!t.notNull},Ru={never:t=>{var e,n;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},oa=(t,e)=>{if(Fu(t))return Qu(t);const n=ge(t);return _e(n,{},Ku)},h=(t,e)=>{const n=ge(t);return _e(n,{},Ru)},ua=y("stocks",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),ticker:s("ticker").notNull(),companyName:s("company_name").notNull(),currentPrice:p("current_price",{precision:12,scale:2}).notNull(),previousClose:p("previous_close",{precision:12,scale:2}),insiderPrice:p("insider_price",{precision:12,scale:2}),insiderQuantity:m("insider_quantity"),insiderTradeDate:s("insider_trade_date").notNull(),insiderName:s("insider_name").notNull(),insiderTitle:s("insider_title"),marketPriceAtInsiderDate:p("market_price_at_insider_date",{precision:12,scale:2}),marketCap:s("market_cap"),peRatio:p("pe_ratio",{precision:10,scale:2}),recommendation:s("recommendation").notNull(),recommendationStatus:s("recommendation_status").default("pending"),source:s("source"),confidenceScore:m("confidence_score"),priceHistory:N("price_history").$type().default([]),description:s("description"),industry:s("industry"),country:s("country"),webUrl:s("web_url"),ipo:s("ipo"),news:N("news").$type().default([]),insiderSentimentMspr:p("insider_sentiment_mspr",{precision:10,scale:4}),insiderSentimentChange:p("insider_sentiment_change",{precision:10,scale:4}),microAnalysisCompleted:T("micro_analysis_completed").notNull().default(!1),macroAnalysisCompleted:T("macro_analysis_completed").notNull().default(!1),combinedAnalysisCompleted:T("combined_analysis_completed").notNull().default(!1),lastUpdated:c("last_updated").defaultNow(),rejectedAt:c("rejected_at")},t=>({transactionUnique:M("stock_transaction_unique_idx").on(t.userId,t.ticker,t.insiderTradeDate,t.insiderName,t.recommendation),userIdIdx:R("stocks_user_id_idx").on(t.userId)})),Cl=oa(ua);h(ua).omit({id:!0,lastUpdated:!0,recommendationStatus:!0,rejectedAt:!0});const Zu=y("user_stock_statuses",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull(),ticker:s("ticker").notNull(),status:s("status").notNull().default("pending"),approvedAt:c("approved_at"),rejectedAt:c("rejected_at"),dismissedAt:c("dismissed_at"),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()},t=>({userTickerUnique:M("user_ticker_unique_idx").on(t.userId,t.ticker)}));h(Zu).omit({id:!0,createdAt:!0,updatedAt:!0});const la=y("opportunity_batches",{id:u("id").primaryKey().default(g`gen_random_uuid()`),cadence:s("cadence").notNull(),fetchedAt:c("fetched_at").defaultNow().notNull(),count:m("count").notNull().default(0),source:s("source").notNull().default("openinsider"),metadata:N("metadata").$type()});h(la).omit({id:!0});const ye=y("opportunities",{id:u("id").primaryKey().default(g`gen_random_uuid()`),batchId:u("batch_id").references(()=>la.id,{onDelete:"cascade"}),cadence:s("cadence").notNull(),ticker:s("ticker").notNull(),companyName:s("company_name").notNull(),currentPrice:p("current_price",{precision:12,scale:2}).notNull(),previousClose:p("previous_close",{precision:12,scale:2}),insiderPrice:p("insider_price",{precision:12,scale:2}),insiderQuantity:m("insider_quantity"),insiderTradeDate:s("insider_trade_date").notNull(),insiderName:s("insider_name").notNull(),insiderTitle:s("insider_title"),marketPriceAtInsiderDate:p("market_price_at_insider_date",{precision:12,scale:2}),marketCap:s("market_cap"),peRatio:p("pe_ratio",{precision:10,scale:2}),recommendation:s("recommendation").notNull(),source:s("source"),confidenceScore:m("confidence_score"),priceHistory:N("price_history").$type().default([]),description:s("description"),industry:s("industry"),country:s("country"),webUrl:s("web_url"),ipo:s("ipo"),news:N("news").$type().default([]),insiderSentimentMspr:p("insider_sentiment_mspr",{precision:10,scale:4}),insiderSentimentChange:p("insider_sentiment_change",{precision:10,scale:4}),lastUpdated:c("last_updated").defaultNow(),createdAt:c("created_at").defaultNow()},t=>({transactionUnique:M("opportunity_transaction_unique_idx").on(t.ticker,t.insiderTradeDate,t.insiderName,t.recommendation),cadenceIdx:R("opportunities_cadence_idx").on(t.cadence),tickerIdx:R("opportunities_ticker_idx").on(t.ticker)}));oa(ye);h(ye).omit({id:!0,lastUpdated:!0,createdAt:!0});const Xu=y("user_opportunity_rejections",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),opportunityId:u("opportunity_id").notNull().references(()=>ye.id,{onDelete:"cascade"}),rejectedAt:c("rejected_at").defaultNow().notNull()},t=>({userOpportunityUnique:M("user_opportunity_rejection_unique_idx").on(t.userId,t.opportunityId),userIdIdx:R("user_opportunity_rejections_user_id_idx").on(t.userId)}));h(Xu).omit({id:!0,rejectedAt:!0});const Gu=y("insider_profiles",{id:u("id").primaryKey().default(g`gen_random_uuid()`),insiderName:s("insider_name").notNull().unique(),totalTrades:m("total_trades").notNull().default(0),successfulTrades:m("successful_trades").notNull().default(0),winLossRatio:p("win_loss_ratio",{precision:5,scale:2}),confidenceScore:m("confidence_score").notNull().default(50),averageReturn:p("average_return",{precision:10,scale:2}),previousDeals:N("previous_deals").$type().default([]),lastUpdated:c("last_updated").defaultNow(),createdAt:c("created_at").defaultNow()});h(Gu).omit({id:!0,createdAt:!0,lastUpdated:!0});const Ju=y("stock_analyses",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ticker:s("ticker").notNull().unique(),status:s("status").notNull().default("pending"),overallRating:s("overall_rating"),confidenceScore:m("confidence_score"),summary:s("summary"),financialHealthScore:m("financial_health_score"),strengths:N("strengths").$type(),weaknesses:N("weaknesses").$type(),redFlags:N("red_flags").$type(),technicalAnalysisScore:m("technical_analysis_score"),technicalAnalysisTrend:s("technical_analysis_trend"),technicalAnalysisMomentum:s("technical_analysis_momentum"),technicalAnalysisSignals:N("technical_analysis_signals").$type(),sentimentAnalysisScore:m("sentiment_analysis_score"),sentimentAnalysisTrend:s("sentiment_analysis_trend"),sentimentAnalysisNewsVolume:s("sentiment_analysis_news_volume"),sentimentAnalysisKeyThemes:N("sentiment_analysis_key_themes").$type(),keyMetrics:N("key_metrics").$type(),risks:N("risks").$type(),opportunities:N("opportunities").$type(),recommendation:s("recommendation"),analyzedAt:c("analyzed_at"),errorMessage:s("error_message"),entryTimingStatus:s("entry_timing_status"),entryTimingPriceMove:s("entry_timing_price_move"),entryTimingDaysOld:m("entry_timing_days_old"),entryTimingAssessment:s("entry_timing_assessment"),sectorName:s("sector_name"),sectorOutlook:s("sector_outlook"),sectorNote:s("sector_note"),secFilingUrl:s("sec_filing_url"),secFilingType:s("sec_filing_type"),secFilingDate:s("sec_filing_date"),secCik:s("sec_cik"),managementDiscussion:s("management_discussion"),riskFactors:s("risk_factors"),businessOverview:s("business_overview"),fundamentalData:N("fundamental_data").$type(),fundamentalAnalysis:s("fundamental_analysis"),macroAnalysisId:u("macro_analysis_id").references(()=>ca.id),integratedScore:m("integrated_score"),scoreAdjustment:s("score_adjustment"),scorecard:N("scorecard").$type(),scorecardVersion:s("scorecard_version"),aiPlaybook:s("ai_playbook"),aiStance:s("ai_stance"),currentSignalScore:m("current_signal_score"),stopLoss:p("stop_loss",{precision:12,scale:2}),profitTarget:p("profit_target",{precision:12,scale:2}),stopLossPercent:p("stop_loss_percent",{precision:5,scale:2}),profitTargetPercent:p("profit_target_percent",{precision:5,scale:2}),lastDailyBriefAt:c("last_daily_brief_at"),createdAt:c("created_at").defaultNow()});h(Ju).omit({id:!0,createdAt:!0});const ca=y("macro_analyses",{id:u("id").primaryKey().default(g`gen_random_uuid()`),industry:s("industry"),status:s("status").notNull().default("pending"),macroScore:m("macro_score"),macroFactor:p("macro_factor",{precision:5,scale:2}),summary:s("summary"),sp500Level:p("sp500_level",{precision:12,scale:2}),sp500Change:p("sp500_change",{precision:10,scale:2}),sp500Trend:s("sp500_trend"),vixLevel:p("vix_level",{precision:10,scale:2}),vixInterpretation:s("vix_interpretation"),economicIndicators:N("economic_indicators").$type(),sectorPerformance:N("sector_performance").$type(),industrySectorAnalysis:N("industry_sector_analysis").$type(),marketCondition:s("market_condition"),marketPhase:s("market_phase"),riskAppetite:s("risk_appetite"),keyThemes:N("key_themes").$type(),opportunities:N("opportunities").$type(),risks:N("risks").$type(),recommendation:s("recommendation"),analyzedAt:c("analyzed_at"),errorMessage:s("error_message"),createdAt:c("created_at").defaultNow()});h(ca).omit({id:!0,createdAt:!0});const Hu=y("stock_candlesticks",{ticker:s("ticker").primaryKey(),candlestickData:N("candlestick_data").$type().notNull().default([]),lastUpdated:c("last_updated").defaultNow(),createdAt:c("created_at").defaultNow()});h(Hu).omit({createdAt:!0});const Wu=y("ai_analysis_jobs",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ticker:s("ticker").notNull(),source:s("source").notNull(),priority:s("priority").notNull().default("normal"),status:s("status").notNull().default("pending"),retryCount:m("retry_count").notNull().default(0),maxRetries:m("max_retries").notNull().default(3),scheduledAt:c("scheduled_at").defaultNow(),startedAt:c("started_at"),completedAt:c("completed_at"),errorMessage:s("error_message"),currentStep:s("current_step"),stepDetails:N("step_details").$type(),lastError:s("last_error"),createdAt:c("created_at").defaultNow()},t=>({activeJobUnique:M("active_job_unique_idx").on(t.ticker).where(g`status IN ('pending', 'processing')`)}));h(Wu).omit({id:!0,createdAt:!0,startedAt:!0,completedAt:!0});const Yu=y("portfolio_holdings",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),ticker:s("ticker").notNull(),quantity:m("quantity").notNull(),averagePurchasePrice:p("average_purchase_price",{precision:12,scale:2}).notNull(),currentValue:p("current_value",{precision:12,scale:2}),profitLoss:p("profit_loss",{precision:12,scale:2}),profitLossPercent:p("profit_loss_percent",{precision:10,scale:2}),isSimulated:T("is_simulated").notNull().default(!1),lastUpdated:c("last_updated").defaultNow()});h(Yu).omit({id:!0,currentValue:!0,profitLoss:!0,profitLossPercent:!0,lastUpdated:!0});const el=y("trades",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),ticker:s("ticker").notNull(),type:s("type").notNull(),quantity:m("quantity").notNull(),price:p("price",{precision:12,scale:2}).notNull(),total:p("total",{precision:12,scale:2}).notNull(),status:s("status").notNull().default("completed"),broker:s("broker").default("manual"),ibkrOrderId:s("ibkr_order_id"),isSimulated:T("is_simulated").notNull().default(!1),executedAt:c("executed_at").defaultNow(),n8nWorkflowId:s("n8n_workflow_id")});h(el).omit({id:!0});const he=y("trading_rules",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").references(()=>D.id,{onDelete:"cascade"}),name:s("name").notNull(),enabled:T("enabled").notNull().default(!0),scope:s("scope").notNull().default("all_holdings"),ticker:s("ticker"),priority:m("priority").notNull().default(1e3),conditions:N("conditions").$type(),action:s("action"),actionParams:N("action_params").$type(),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()}),vl=h(he).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({conditions:j(E({metric:$(),operator:$(),value:F(),logic:U(["AND","OR"]).optional(),baselinePrice:F().optional()})).optional()}),Ne=y("rule_condition_groups",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ruleId:u("rule_id").notNull().references(()=>he.id,{onDelete:"cascade"}),groupOrder:m("group_order").notNull(),junctionOperator:s("junction_operator"),description:s("description"),createdAt:c("created_at").defaultNow()});h(Ne).omit({id:!0,createdAt:!0});const tl=y("rule_conditions",{id:u("id").primaryKey().default(g`gen_random_uuid()`),groupId:u("group_id").notNull().references(()=>Ne.id,{onDelete:"cascade"}),metric:s("metric").notNull(),comparator:s("comparator").notNull(),threshold:p("threshold",{precision:12,scale:4}).notNull(),timeframeValue:m("timeframe_value"),timeframeUnit:s("timeframe_unit"),metadata:N("metadata").$type(),createdAt:c("created_at").defaultNow()});h(tl).omit({id:!0,createdAt:!0});const nl=y("rule_actions",{id:u("id").primaryKey().default(g`gen_random_uuid()`),groupId:u("group_id").notNull().references(()=>Ne.id,{onDelete:"cascade"}),actionOrder:m("action_order").notNull(),actionType:s("action_type").notNull(),quantity:m("quantity"),percentage:p("percentage",{precision:5,scale:2}),allowRepeat:T("allow_repeat").notNull().default(!1),cooldownMinutes:m("cooldown_minutes"),createdAt:c("created_at").defaultNow()});h(nl).omit({id:!0,createdAt:!0});const rl=y("rule_executions",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ruleId:u("rule_id").notNull().references(()=>he.id,{onDelete:"cascade"}),ticker:s("ticker").notNull(),holdingId:u("holding_id"),triggeredAt:c("triggered_at").notNull().defaultNow(),conditionsMet:N("conditions_met").$type().notNull(),actionsExecuted:N("actions_executed").$type().notNull(),success:T("success").notNull(),errorMessage:s("error_message")});h(rl).omit({id:!0,triggeredAt:!0});E({name:$().min(1),enabled:Y().default(!0),scope:U(["all_holdings","specific_stock"]).default("all_holdings"),ticker:$().optional(),priority:F().int().default(1e3),groups:j(E({groupOrder:F().int(),junctionOperator:U(["AND","OR"]).optional(),description:$().optional(),conditions:j(E({metric:U(["price_change_percent","price_change_from_close_percent","price_absolute","days_held"]),comparator:U([">","<",">=","<=","=="]),threshold:$(),timeframeValue:F().int().optional(),timeframeUnit:U(["days","hours","minutes"]).optional(),metadata:ce(G()).optional()})),actions:j(E({actionOrder:F().int(),actionType:U(["sell_percentage","sell_quantity","sell_all","notify"]),quantity:F().int().optional(),percentage:$().optional(),allowRepeat:Y().default(!1),cooldownMinutes:F().int().optional()}))}))});const D=y("users",{id:u("id").primaryKey().default(g`gen_random_uuid()`),name:s("name").notNull(),email:s("email").notNull().unique(),passwordHash:s("password_hash"),avatarColor:s("avatar_color").notNull().default("#3b82f6"),authProvider:s("auth_provider").notNull().default("email"),googleSub:s("google_sub").unique(),googlePicture:s("google_picture"),isAdmin:T("is_admin").notNull().default(!1),isSuperAdmin:T("is_super_admin").notNull().default(!1),emailVerified:T("email_verified").notNull().default(!1),emailVerificationToken:s("email_verification_token"),emailVerificationExpiry:c("email_verification_expiry"),subscriptionStatus:s("subscription_status").notNull().default("pending_verification"),paypalSubscriptionId:s("paypal_subscription_id"),subscriptionStartDate:c("subscription_start_date"),subscriptionEndDate:c("subscription_end_date"),trialEndsAt:c("trial_ends_at"),lastDataRefresh:c("last_data_refresh"),initialDataFetched:T("initial_data_fetched").notNull().default(!1),hasSeenOnboarding:T("has_seen_onboarding").notNull().default(!1),onboardingCompletedAt:c("onboarding_completed_at"),tutorialCompletions:N("tutorial_completions").$type().default({}),stockLimit:m("stock_limit").notNull().default(100),riskPreference:s("risk_preference").notNull().default("balanced"),optionsDealThresholdPercent:m("options_deal_threshold_percent").notNull().default(15),minMarketCapFilter:m("min_market_cap_filter").notNull().default(500),showAllOpportunities:T("show_all_opportunities").notNull().default(!1),archived:T("archived").notNull().default(!1),archivedAt:c("archived_at"),archivedBy:u("archived_by"),createdAt:c("created_at").defaultNow()});h(D).omit({id:!0,createdAt:!0,archivedAt:!0,lastDataRefresh:!0});const il=y("payments",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),amount:p("amount",{precision:10,scale:2}).notNull(),paymentDate:c("payment_date").notNull(),paymentMethod:s("payment_method").notNull(),status:s("status").notNull().default("completed"),transactionId:s("transaction_id"),notes:s("notes"),createdAt:c("created_at").defaultNow(),createdBy:u("created_by")});h(il).omit({id:!0,createdAt:!0});const sl=y("manual_overrides",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),startDate:c("start_date").notNull(),endDate:c("end_date").notNull(),monthsExtended:m("months_extended").notNull(),reason:s("reason"),createdAt:c("created_at").defaultNow(),createdBy:u("created_by").notNull()});h(sl).omit({id:!0,createdAt:!0});const al=y("password_reset_tokens",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),token:s("token").notNull().unique(),expiresAt:c("expires_at").notNull(),used:T("used").notNull().default(!1),createdAt:c("created_at").defaultNow(),createdBy:u("created_by").notNull()});h(al).omit({id:!0,createdAt:!0,used:!0});const ol=y("user_tutorials",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull(),tutorialId:s("tutorial_id").notNull(),completedAt:c("completed_at").defaultNow()});h(ol).omit({id:!0,completedAt:!0});const ul=y("stock_comments",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ticker:s("ticker").notNull(),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),comment:s("comment").notNull(),createdAt:c("created_at").defaultNow()});h(ul).omit({id:!0,createdAt:!0});const ll=y("stock_views",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ticker:s("ticker").notNull(),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),viewedAt:c("viewed_at").defaultNow()});h(ll).omit({id:!0,viewedAt:!0});const cl=y("backtests",{id:u("id").primaryKey().default(g`gen_random_uuid()`),name:s("name").notNull(),ruleId:u("rule_id"),startDate:c("start_date").notNull(),endDate:c("end_date").notNull(),initialCapital:p("initial_capital",{precision:12,scale:2}).notNull(),finalValue:p("final_value",{precision:12,scale:2}).notNull(),totalReturn:p("total_return",{precision:10,scale:2}).notNull(),totalReturnPercent:p("total_return_percent",{precision:10,scale:2}).notNull(),numberOfTrades:m("number_of_trades").notNull(),winRate:p("win_rate",{precision:5,scale:2}),bestTrade:p("best_trade",{precision:12,scale:2}),worstTrade:p("worst_trade",{precision:12,scale:2}),tradeLog:N("trade_log").$type(),equityCurve:N("equity_curve").$type(),createdAt:c("created_at").defaultNow()});h(cl).omit({id:!0,createdAt:!0});const dl=y("telegram_config",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").references(()=>D.id,{onDelete:"cascade"}),channelUsername:s("channel_username").notNull(),sessionString:s("session_string"),phoneNumber:s("phone_number"),enabled:T("enabled").notNull().default(!0),lastSync:c("last_sync"),lastMessageId:m("last_message_id")});h(dl).omit({id:!0,lastSync:!0,lastMessageId:!0,sessionString:!0});const pl=y("ibkr_config",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").references(()=>D.id,{onDelete:"cascade"}),gatewayUrl:s("gateway_url").notNull().default("https://localhost:5000"),accountId:s("account_id"),isConnected:T("is_connected").notNull().default(!1),isPaperTrading:T("is_paper_trading").notNull().default(!0),lastConnectionCheck:c("last_connection_check"),lastError:s("last_error")});h(pl).omit({id:!0,lastConnectionCheck:!0,isConnected:!0});const ml=y("openinsider_config",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").references(()=>D.id,{onDelete:"cascade"}),enabled:T("enabled").notNull().default(!1),fetchLimit:m("fetch_limit").notNull().default(50),fetchInterval:s("fetch_interval").notNull().default("hourly"),fetchPreviousDayOnly:T("fetch_previous_day_only").notNull().default(!1),insiderTitles:s("insider_titles").array(),minTransactionValue:m("min_transaction_value"),minMarketCap:m("min_market_cap").notNull().default(500),optionsDealThresholdPercent:m("options_deal_threshold_percent").notNull().default(15),minCommunityEngagement:m("min_community_engagement").notNull().default(10),lastSync:c("last_sync"),lastError:s("last_error")});h(ml).omit({id:!0,lastSync:!0});const fl=y("backtest_jobs",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").references(()=>D.id,{onDelete:"cascade"}),name:s("name").notNull(),dataSource:s("data_source").notNull().default("telegram"),messageCount:m("message_count").notNull(),status:s("status").notNull().default("pending"),progress:m("progress").default(0),errorMessage:s("error_message"),candidateStocks:N("candidate_stocks").$type().default([]),createdAt:c("created_at").defaultNow(),completedAt:c("completed_at")});h(fl).omit({id:!0,status:!0,progress:!0,errorMessage:!0,candidateStocks:!0,createdAt:!0,completedAt:!0});const gl=y("backtest_price_data",{id:u("id").primaryKey().default(g`gen_random_uuid()`),jobId:u("job_id").notNull(),ticker:s("ticker").notNull(),insiderBuyDate:s("insider_buy_date").notNull(),priceMatrix:N("price_matrix").$type().notNull(),createdAt:c("created_at").defaultNow()});h(gl).omit({id:!0,createdAt:!0});const _l=y("backtest_scenarios",{id:u("id").primaryKey().default(g`gen_random_uuid()`),jobId:u("job_id").notNull(),scenarioNumber:m("scenario_number").notNull(),name:s("name").notNull(),description:s("description"),sellConditions:N("sell_conditions").$type().notNull(),sellAction:N("sell_action").$type().notNull(),totalProfitLoss:p("total_profit_loss",{precision:12,scale:2}).notNull(),totalProfitLossPercent:p("total_profit_loss_percent",{precision:10,scale:2}).notNull(),winRate:p("win_rate",{precision:5,scale:2}),numberOfTrades:m("number_of_trades").notNull(),tradeDetails:N("trade_details").$type(),createdAt:c("created_at").defaultNow()});h(_l).omit({id:!0,createdAt:!0});const da=y("feature_suggestions",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),title:s("title").notNull(),description:s("description").notNull(),status:s("status").notNull().default("pending"),voteCount:m("vote_count").notNull().default(0),createdAt:c("created_at").defaultNow(),updatedAt:c("updated_at").defaultNow()});h(da).omit({id:!0,voteCount:!0,createdAt:!0,updatedAt:!0});const yl=y("feature_votes",{id:u("id").primaryKey().default(g`gen_random_uuid()`),suggestionId:u("suggestion_id").notNull().references(()=>da.id,{onDelete:"cascade"}),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),createdAt:c("created_at").defaultNow()},t=>({userSuggestionUnique:M("user_suggestion_unique_idx").on(t.userId,t.suggestionId)}));h(yl).omit({id:!0,createdAt:!0});const hl=y("notifications",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),ticker:s("ticker").notNull(),type:s("type").notNull(),score:m("score"),message:s("message").notNull(),metadata:N("metadata").$type(),isRead:T("is_read").notNull().default(!1),createdAt:c("created_at").notNull().defaultNow()},t=>({userIdIdx:M("notifications_user_id_idx").on(t.userId,t.isRead,t.createdAt),userTickerTypeUnique:M("notifications_user_ticker_type_idx").on(t.userId,t.ticker,t.type)}));h(hl).omit({id:!0,createdAt:!0});const pa=y("announcements",{id:u("id").primaryKey().default(g`gen_random_uuid()`),title:s("title").notNull(),content:s("content").notNull(),type:s("type").notNull().default("update"),isActive:T("is_active").notNull().default(!0),createdAt:c("created_at").notNull().defaultNow(),createdBy:u("created_by").notNull().references(()=>D.id)});h(pa).omit({id:!0,createdAt:!0});const Nl=y("announcement_reads",{id:u("id").primaryKey().default(g`gen_random_uuid()`),announcementId:u("announcement_id").notNull().references(()=>pa.id,{onDelete:"cascade"}),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),readAt:c("read_at").notNull().defaultNow()},t=>({userAnnouncementUnique:M("user_announcement_unique_idx").on(t.userId,t.announcementId)}));h(Nl).omit({id:!0,readAt:!0});const bl=y("admin_notifications",{id:u("id").primaryKey().default(g`gen_random_uuid()`),type:s("type").notNull(),title:s("title").notNull(),message:s("message").notNull(),metadata:N("metadata").$type(),isRead:T("is_read").notNull().default(!1),readAt:c("read_at"),createdAt:c("created_at").notNull().defaultNow()});h(bl).omit({id:!0,createdAt:!0,readAt:!0});const wl=y("followed_stocks",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull(),ticker:s("ticker").notNull(),followedAt:c("followed_at").notNull().defaultNow(),hasEnteredPosition:T("has_entered_position").default(!1).notNull(),entryPrice:p("entry_price",{precision:12,scale:2}),quantity:m("quantity").default(1),sellPrice:p("sell_price",{precision:12,scale:2}),sellDate:c("sell_date"),pnl:p("pnl",{precision:12,scale:2})},t=>({userTickerFollowUnique:M("user_ticker_follow_unique_idx").on(t.userId,t.ticker)}));h(wl).omit({id:!0,followedAt:!0,hasEnteredPosition:!0,entryPrice:!0,sellPrice:!0,sellDate:!0,pnl:!0,quantity:!0});const Sl=y("daily_briefs",{id:u("id").primaryKey().default(g`gen_random_uuid()`),userId:u("user_id").notNull().references(()=>D.id,{onDelete:"cascade"}),ticker:s("ticker").notNull(),briefDate:s("brief_date").notNull(),priceSnapshot:p("price_snapshot",{precision:12,scale:2}).notNull(),priceChange:p("price_change",{precision:12,scale:2}),priceChangePercent:p("price_change_percent",{precision:10,scale:2}),watchingStance:s("watching_stance").notNull(),watchingConfidence:m("watching_confidence").notNull(),watchingText:s("watching_text").notNull(),watchingHighlights:s("watching_highlights").array().default([]),owningStance:s("owning_stance").notNull(),owningConfidence:m("owning_confidence").notNull(),owningText:s("owning_text").notNull(),owningHighlights:s("owning_highlights").array().default([]),keyHighlights:s("key_highlights").array().default([]),recommendedStance:s("recommended_stance"),confidence:m("confidence"),briefText:s("brief_text"),userOwnsPosition:T("user_owns_position").default(!1),createdAt:c("created_at").notNull().defaultNow()},t=>({userTickerDateUnique:M("daily_brief_user_ticker_date_idx").on(t.userId,t.ticker,t.briefDate)}));h(Sl).omit({id:!0,createdAt:!0});const Tl=y("ticker_daily_briefs",{id:u("id").primaryKey().default(g`gen_random_uuid()`),ticker:s("ticker").notNull(),briefDate:s("brief_date").notNull(),priceSnapshot:p("price_snapshot",{precision:12,scale:2}).notNull(),priceChange:p("price_change",{precision:12,scale:2}),priceChangePercent:p("price_change_percent",{precision:10,scale:2}),priceSinceInsider:p("price_since_insider",{precision:10,scale:2}),previousSignalScore:m("previous_signal_score"),newSignalScore:m("new_signal_score").notNull(),scoreChange:m("score_change"),scoreChangeReason:s("score_change_reason"),stance:s("stance").notNull(),stanceChanged:T("stance_changed").default(!1),briefText:s("brief_text").notNull(),keyUpdates:N("key_updates").$type().default([]),newInsiderTransactions:T("new_insider_transactions").default(!1),newsImpact:s("news_impact"),priceActionAssessment:s("price_action_assessment"),stopLossHit:T("stop_loss_hit").default(!1),profitTargetHit:T("profit_target_hit").default(!1),createdAt:c("created_at").notNull().defaultNow()},t=>({tickerDateUnique:M("ticker_daily_brief_unique_idx").on(t.ticker,t.briefDate),tickerIdx:R("ticker_daily_briefs_ticker_idx").on(t.ticker),dateIdx:R("ticker_daily_briefs_date_idx").on(t.briefDate)}));h(Tl).omit({id:!0,createdAt:!0});const Pl=y("glossary_terms",{id:u("id").primaryKey().default(g`gen_random_uuid()`),term:s("term").notNull().unique(),definition:s("definition").notNull(),category:s("category").notNull(),synonyms:s("synonyms").array().default([]),createdAt:c("created_at").notNull().defaultNow(),updatedAt:c("updated_at").notNull().defaultNow()});h(Pl).omit({id:!0,createdAt:!0,updatedAt:!0});const Il=y("system_settings",{id:u("id").primaryKey().default(g`gen_random_uuid()`),appVersion:s("app_version").notNull().default("1.0.0"),releaseNotes:s("release_notes"),lastUpdatedBy:u("last_updated_by").references(()=>D.id),updatedAt:c("updated_at").notNull().defaultNow(),aiProvider:s("ai_provider").notNull().default("openai"),aiModel:s("ai_model")});h(Il).omit({id:!0,updatedAt:!0});export{Dl as D,vl as i,Cl as s};
